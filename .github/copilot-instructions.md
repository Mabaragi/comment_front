# Copilot Instructions

This document provides guidelines for AI assistants to effectively contribute to this project.

## Project Overview

This is a React (Vite) application using TypeScript. It serves as the frontend for a webtoon/series comment analysis platform.

- **UI Framework**: React with TypeScript
- **Styling**: Tailwind CSS with shadcn/ui components. See `src/components/ui`.
- **State Management**: Zustand for global state (e.g., authentication in `src/stores/authStore.ts`).
- **Data Fetching**: TanStack Query (`@tanstack/react-query`) is used for server state management.
- **Routing**: React Router (`react-router-dom`) is used for page navigation. See `src/pages`.
- **API Client**: The API client is generated from an OpenAPI specification using Orval.

## Key Workflows

### 1. Running the Development Server

To run the application locally, use the following command. The application will be available at `http://localhost:5173` by default and expects the backend API to be running at `http://localhost:8000`.

```bash
npm run dev
```

### 2. API Client Generation

The project uses Orval to generate a typed API client from a backend OpenAPI schema. When the backend API changes, you **must** regenerate the client.

```bash
npm run generate-api
```

This command reads the configuration from `orval.config.js` and outputs the generated hooks, schemas, and endpoint definitions into `src/api`.

## Architecture & Patterns

### Data Fetching with TanStack Query

- All server-side data fetching should be handled by TanStack Query.
- The primary hooks are auto-generated by Orval and are located in `src/api/hooks`. For example, to fetch a list of series, you would use `useCrawlerSeriesList`.
- Custom hooks that build upon these generated hooks are placed in `src/hooks` (e.g., `useSeriesData.ts`).

### Error Handling

A critical convention in this project is how errors are handled:

- **Do not** use `try/catch` blocks within the low-level API functions (e.g., in files under `src/api/`).
- Let Promise rejections propagate upwards naturally.
- TanStack Query's `useQuery` and `useMutation` hooks will catch these errors. Handle them using the `onError` callback within the hook or globally within the `QueryClient` configuration. This centralizes error handling logic and keeps the API layer clean.

### State Management with Zustand

- Global client-side state is managed with Zustand.
- The main store is `src/stores/authStore.ts` for handling authentication tokens and user state.
- When creating new stores, follow the existing pattern of creating a separate file in the `src/stores` directory.

### Component Structure

- **Pages**: Top-level components for routes are in `src/pages`.
- **Reusable Components**: General-purpose components are in `src/components`.
- **UI Primitives**: Base UI components from shadcn/ui are located in `src/components/ui`. When adding new shadcn/ui components, use the CLI and ensure they are placed here.
